<VirtualHost *:80>
    ServerName mail.rafikihost.co.ke
    ServerAlias www.mail.rafikihost.co.ke
    DocumentRoot /var/lib/roundcube
    ServerAdmin webmaster@domain.com

 RewriteEngine on
 RewriteCond %{SERVER_NAME} =www.mail.rafikihost.co.ke [OR]
 RewriteCond %{SERVER_NAME} =mail.rafikihost.co.ke
 RewriteRule ^ https://%{SERVER_NAME}%{REQUEST_URI} [END,QSA,R=permanent]

<Directory /var/lib/roundcube>
        Require all granted
        AllowOverride None
</Directory>

</VirtualHost>


# the below section is only need if you have above 3 lines and want SSL
<VirtualHost *:443>
    ServerName mail.rafikihost.co.ke
    ServerAlias www.mail.rafikihost.co.ke
    ServerAdmin webmaster@domain.com
    DocumentRoot /var/lib/roundcube

    SSLEngine On
    SSLCertificateFile /etc/letsencrypt/live/rafikihost.co.ke/fullchain.pem
    SSLCertificateKeyFile /etc/letsencrypt/live/rafikihost.co.ke/privkey.pem
    Include /etc/letsencrypt/options-ssl-apache.conf


<Directory /var/lib/roundcube>
        Require all granted
        AllowOverride None
</Directory>

 </VirtualHost>

